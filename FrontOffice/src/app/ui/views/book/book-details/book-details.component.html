<div *ngIf="book">
  <div class="bg-white">
    <div
      class="mx-auto pt-16 pb-8 px-4 sm:pt-24 sm:px-6 lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-3 lg:gap-x-8"
    >
      <!-- Product details -->
      <div class="lg:row-start-1 col-start-2 col-end-4">
        <div class="mt-4">
          <h1
            class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl"
          >
            {{ book.title }}
          </h1>
        </div>

        <section aria-labelledby="information-heading" class="mt-4">
          <h2 id="information-heading" class="sr-only">Product information</h2>

          <div class="mt-6 flex items-center" *ngIf="verifyStock()">
            <svg
              class="flex-shrink-0 w-5 h-5 text-green-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            <p class="ml-2 text-sm text-gray-500">In stock and ready to ship</p>
          </div>

          <div class="mt-6 flex items-center" *ngIf="!verifyStock()">
            <svg
              class="flex-shrink-0 w-5 h-5 text-red-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
            <p class="ml-2 text-sm text-gray-500">In stock and ready to ship</p>
          </div>

          <div class="mt-10 lg:max-w-lg">
            <section aria-labelledby="options-heading">
              <h2 id="options-heading" class="sr-only">Product options</h2>

              <div>
                <div class="sm:flex sm:justify-between">
                  <!-- Size selector -->
                  <fieldset>
                    <legend class="block text-sm font-medium text-gray-700">
                      Condition
                    </legend>
                    <div class="mt-1 grid grid-cols-1 gap-4 sm:grid-cols-2">
                      <!-- Active: "ring-2 ring-indigo-500" -->

                      <label
                        class="buttonPrice"
                        [ngClass]="{ buttonPriceActive: selectedState == 0 }"
                        (click)="selectState(0)"
                      >
                        <input
                          type="radio"
                          name="size-choice"
                          value="18L"
                          class="sr-only"
                          aria-labelledby="size-choice-0-label"
                          aria-describedby="size-choice-0-description"
                        />
                        <div class="h-20">
                          <p
                            id="size-choice-0-label"
                            class="text-base font-medium text-gray-900"
                          >
                            New
                          </p>
                          <p
                            id="size-choice-0-description"
                            class="mt-1 text-sm text-gray-500"
                          >
                            Original factory book, you will be the first owner
                            of this item
                          </p>
                        </div>
                        <p class="pt-3 text-md text-right align-bottom">
                          <b>{{ book.price[0].price }}€</b>
                        </p>
                        <!--
                            Active: "border", Not Active: "border-2"
                            Checked: "border-indigo-500", Not Checked: "border-transparent"
                          -->
                        <div
                          class="absolute -inset-px rounded-lg border-2 pointer-events-none"
                          aria-hidden="true"
                        ></div>
                      </label>

                      <!-- Active: "ring-2 ring-indigo-500" -->
                      <label
                        class="buttonPrice"
                        [ngClass]="{ buttonPriceActive: selectedState == 1 }"
                        (click)="selectState(1)"
                      >
                        <input
                          type="radio"
                          name="size-choice"
                          value="20L"
                          class="sr-only"
                          aria-labelledby="size-choice-1-label"
                          aria-describedby="size-choice-1-description"
                        />
                        <div class="h-20">
                          <p
                            id="size-choice-0-label"
                            class="text-base font-medium text-gray-900"
                          >
                            Used
                          </p>
                          <p
                            id="size-choice-0-description"
                            class="mt-1 text-sm text-gray-500"
                          >
                            Original factory book, you will be the first owner
                            of this item teste teste teste
                          </p>
                        </div>
                        <p class="pt-3 text-md text-right align-bottom">
                          <b>{{ book.price[1].price }}€</b>
                        </p>
                        <!--
                            Active: "border", Not Active: "border-2"
                            Checked: "border-indigo-500", Not Checked: "border-transparent"
                          -->
                        <div
                          class="absolute -inset-px rounded-lg border-2 pointer-events-none"
                          aria-hidden="true"
                        ></div>
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="mt-4">
                  <a
                    class="group inline-flex text-sm text-gray-500 hover:text-gray-700"
                  >
                    <span>What book condition should i choose?</span>
                    <!-- Heroicon name: solid/question-mark-circle -->
                    <svg
                      class="flex-shrink-0 ml-2 h-5 w-5 text-gray-400 group-hover:text-gray-500"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </a>
                </div>
                <div class="mt-10">
                  <button
                    class="w-full bg-blue-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-indigo-500"
                    (click)="addBookToCart()"
                  >
                    Add to bag
                  </button>
                </div>
              </div>
            </section>
          </div>
        </section>
      </div>

      <!-- Product image -->
      <div class="lg:mt-0 lg:col-start-1 lg:row-span-1 lg:self-center">
        <div class="w-full flex justify-center items-center overflow-hidden">
          <custom-img
            [src]="imageUrl + book.image"
            [class]="
              'lg:w-96 lg:h-150 w-80 h-96 object-center object-cover rounded-lg'
            "
          ></custom-img>
        </div>
      </div>
    </div>
  </div>

  <div class="mx-auto px-4 py-24 sm:px-6 sm:py-20 lg:max-w-7xl lg:px-8">
    <!-- Details section -->
    <section aria-labelledby="details-heading">
      <div class="flex flex-col text-left">
        <h2
          id="details-heading"
          class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl"
        >
          Sinopse of book
        </h2>
        <p class="mt-3 text-lg text-gray-600">
          {{ book.descrition }}
        </p>
      </div>

      <div class="flex flex-col text-left mt-10">
        <h2
          id="details-heading"
          class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl"
        >
          Book details
        </h2>
        <div class="mt-5">
          <p id="size-choice-0-label" class="text-base text-gray-900">
            <b>ISBN:</b> {{ book.isbn }}
          </p>
          <p id="size-choice-0-label" class="text-base text-gray-900">
            <b>Publish Date:</b> {{ book.publishDate }}
          </p>
          <p id="size-choice-0-label" class="text-base text-gray-900">
            <b>Publisher:</b> {{ book.publishers }}
          </p>
          <p id="size-choice-0-label" class="text-base text-gray-900">
            <b>Language:</b> {{ book.lang }}
          </p>
          <p id="size-choice-0-label" class="text-base text-gray-900">
            <b>Number of pages:</b> {{ book.number_of_pages }}
          </p>
        </div>
      </div>
    </section>
  </div>

  <app-book-reviews
    [bookSelected]="book._id"
    [bookReviews]="book.review"
  ></app-book-reviews>
</div>

<custom-loading-screen
  [visibleLoading]="visibleLoading"
></custom-loading-screen>
